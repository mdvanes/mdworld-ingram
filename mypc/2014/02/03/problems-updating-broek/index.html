<!DOCTYPE html><!--[if lt IE 9]> <html class="lt-ie9" lang="en"> <![endif]--><!--[if IE 9]>    <html class="ie9" lang="en"> <![endif]--><!--[if gt IE 9]><!--><html xmlns=http://www.w3.org/1999/xhtml class=gt-ie9 lang=en><!--<![endif]--><head><!-- version 0.3.5 --><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=author content="mdworld 0.3.5"><title>Problems updating Broek</title><link rel="shortcut icon" href=/mdworld-ingram/img/favicon.ico type=image/x-icon><link rel=stylesheet href=/mdworld-ingram/css/all.css></head><body><div class=site><nav class="navbar navbar-inverse navbar-fixed-top"><div><div class=container><div class=row><ul class="nav navbar-nav navbar-right"><li><a href=/mdworld-ingram/ ><span class="glyphicon glyphicon-home"></span> home</a></li><li><a href=/mdworld-ingram/#blog><span class="glyphicon glyphicon-pencil"></span> blog</a></li><li><a href=https://twitter.com/mdworldNL><span class=twitter></span> <span class=label-optional>@mdworldNL</span></a></li><li><a href=# data-toggle=modal data-target=#contactModal><span class="glyphicon glyphicon-envelope"></span> <span class=label-optional>contact</span></a></li></ul></div></div></div><header><h1 class="title post-title container">Problems updating Broek</h1></header></nav><p class="meta container">03 Feb 2014</p><div class="post container"><div class=multi-column-text><p>Today I tried to update the packages on broek through webmin. I do this quite... unregulary. Still, I was surprised to find that all updates where failing.</p><p>A suggestion was to use:</p><div class=highlight><pre><code class=language-bash data-lang=bash>apt-get -f install
</code></pre></div><p>This gave an error on a directory in ./boot/ with <code>no space left on device</code> When checking with <code>du</code>, the disk was indeed full. It seemed I needed to clean up old kernels (per <a href="http://ubuntuforums.org/showthread.php?t=1435818">this article</a>).</p><p>First I have to identify my current kernel version: <code>bash uname -r: 3.2.0.53-generic</code></p><p><a name=webmin></a> First I try to remove the old kernels with webmin.</p><ol><li>search installed packages for linux-image (under software packages, not software packages updates)</li><li>deselect the installed version and installed version -1, just to be on the safe side.</li><li>select &quot;delete them all&quot; and &quot;remove unused dependencies&quot; too.</li></ol><p>Unfortunately, this fails because of the same dependency with kernel version 3.2.0.56 (that it tries to install, but can&#39;t because the disk is full).</p><p>I found a suggestion to remove 1 old kernel manually from the filesystem and try again. Removing 1 kernel manually with apt-get didn&#39;t work, so I tried:</p><div class=highlight><pre><code class=language-bash data-lang=bash>sudo rm boot/initrd.img-3.2.0-29-generic
</code></pre></div><p>Now I have 6.8M free on /boot (instead of <code>0</code>)</p><p>I tried removing the old kernels <a href=#webmin>through webmin</a>, but it still didn&#39;t work. So I also removed kernel *.32 and *.35 manually. Now I have 41M free. Now I try to install the newest kernel by hand (*.56):</p><div class=highlight><pre><code class=language- data-lang="">sudo apt-get install -f
</code></pre></div><p>But there where still dependency errors, so in the end I found myself following the instructions from <a href=http://askubuntu.com/questions/279543/unmet-dependencies-not-configured-yet>this thread</a>:</p><div class=highlight><pre><code class=language- data-lang="">sudo dpkg --remove linux-server
sudo dpkg --remove linux-image-server linux-headers-server
</code></pre></div><p>After this /boot still seems to contain the old kernels, at least the ones i didn&#39;t already removed manually, but this might be as intended.</p><div class=highlight><pre><code class=language- data-lang="">sudo apt-get install linux-server linux-image-generic linux-headers-generic
</code></pre></div><p>This seems to have worked fine.</p><div class=highlight><pre><code class=language- data-lang=""># purge unused kernels, but could do more so your mileage may vary
sudo apt-get autoremove
</code></pre></div><p>Again no errors, so I try to clean up some old kernels from webmin as well (see the <a href=#webmin>removing with webmin steps</a> ). Now this finally works. Now updating packages through webmin works normally again.</p></div></div><div class="modal fade modal-terminal" id=contactModal tabindex=-1 role=dialog aria-labelledby=contactModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button><h4 class=modal-title id=myModalLabel>contact@mdworld</h4></div><div class=modal-body><form role=form id=contactForm><div class=form-group><label for=contactName>Name</label><input class=form-control id=contactName placeholder="Enter name" name=name required maxlength=1024></div><div class=form-group><label for=contactEmail>Email address</label><input type=email class=form-control id=contactEmail placeholder="Enter email" name=email required maxlength=1024></div><div class=form-group><label for=contactMessage>Message</label><textarea class=form-control id=contactMessage placeholder=Message name=message required maxlength=4096></textarea></div><button type=button class="btn btn-primary submit-contact">Submit</button></form></div></div></div></div><footer><div class="content container"><div class="row projects"><div class="col-xs-12 col-xl-4 col-xl-offset-2"><h2>Open Source by MDWorld</h2></div></div><div class="row projects"><div class="col-xs-12 col-sm-6 col-xl-4 col-xl-offset-2"><div class=media-wrapper><a class=media href=https://github.com/mdvanes/polygram><span class="pull-left icon github"></span><div class=media-body><h4 class=media-heading>polygram</h4>Polymer and Redux App</div></a></div><div class=media-wrapper><a class=media href=https://github.com/mdvanes/mdworld-pwa-demo><span class="pull-left icon github"></span><div class=media-body><h4 class=media-heading>mdworld-pwa-demo</h4>Progressive Web App demo</div></a></div><div class=media-wrapper><a class=media href=https://bitbucket.org/mdvanes/homeremote><span class="pull-left icon bitbucket"></span><div class=media-body><h4 class=media-heading>HomeRemote</h4>ES6 React and Node Home automation tool</div></a></div><div class=media-wrapper><a class=media href=https://github.com/mdvanes/generator-mdworld-toolchain><span class="pull-left icon github"></span><div class=media-body><h4 class=media-heading>generator-mdworld-toolchain</h4>Yeoman generator to set up the mdworld toolchain</div></a></div><div class=media-wrapper><a class=media href=http://mdvanes.github.io/ImpossibleObjects/ ><span class="pull-left icon github"></span><div class=media-body><h4 class=media-heading>ImpossibleObjects</h4>A selection of impossible objects using Canvas</div></a></div><div class=media-wrapper><a class=media href=https://github.com/mdvanes/grunt-kot2html><span class="pull-left icon github"></span><div class=media-body><h4 class=media-heading>grunt-kot2html</h4>Grunt task to combine Knockout templates into one HTML</div></a></div><div class=media-wrapper><a class=media href=https://github.com/mdvanes/grunt-kot2js><span class="pull-left icon github"></span><div class=media-body><h4 class=media-heading>grunt-kot2js</h4>Grunt task to convert Knockout templates to a JavaScript file</div></a></div></div><div class="col-xs-12 col-sm-6 col-xl-4"><div class=media-wrapper><a class=media href=https://github.com/mdvanes/mdworld-stox><span class="pull-left icon github"></span><div class=media-body><h4 class=media-heading>mdworld-stox</h4>Websockets in Node.js demo</div></a></div><div class=media-wrapper><a class=media href=https://github.com/mdvanes/SynergyChrome><span class="pull-left icon github"></span><div class=media-body><h4 class=media-heading>SynergyChrome</h4>Use Synergy in Chrome</div></a></div><div class=media-wrapper><a class=media href=https://github.com/mdvanes/Movienight><span class="pull-left icon github"></span><div class=media-body><h4 class=media-heading>Movienight</h4>PoC for hybrid app with Ionic Framework</div></a></div><div class=media-wrapper><a class=media href=https://bitbucket.org/mdvanes/mderekelbox><span class="pull-left icon bitbucket"></span><div class=media-body><h4 class=media-heading>Rekelbox</h4>Arduino VU meter</div></a></div><div class=media-wrapper><a class=media href=https://bitbucket.org/mdvanes/mdepolska><span class="pull-left icon bitbucket"></span><div class=media-body><h4 class=media-heading>MDE Polska</h4>Polish keyboard Drupal module</div></a></div><div class=media-wrapper><a class=media href=https://bitbucket.org/mdvanes/mdegraph><span class="pull-left icon bitbucket"></span><div class=media-body><h4 class=media-heading>MDE Graph</h4>Javascript Graph PoC</div></a></div><div class=media-wrapper><a class=media href=https://bitbucket.org/mdvanes/mdeinsignificant><span class="pull-left icon bitbucket"></span><div class=media-body><h4 class=media-heading>Insignificant!</h4>loltext generator Drupal module</div></a></div></div></div><div class=row><h1 class=dedication>an MDWorld production</h1><p><a class=cc href=http://creativecommons.org/licenses/by-nc-sa/3.0/ title="Creative Commons">CC</a> 2003-2018</p></div></div></footer></div><!-- .site --><script src=/mdworld-ingram/js/scripts.js></script><!-- Run init for demo after loading jquery --><script>if(typeof(demoInit) === 'function') {
                demoInit();
            }</script></body></html>